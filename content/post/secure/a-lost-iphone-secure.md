+++
date = "2016-04-04T23:19:32+08:00"
draft = false
title = "从一个丢失的iphone看互联网信息安全"
categories = [ "secure" ]
type="secure"
payable="true"
+++
# 一个真实故事
## 背景

  妹子把手机丢了...是在上公交车时, 妹子第二个上车, 头一个上去的黑色羽绒服男上车后问师傅是否去XX地, 师傅说不去, 黑羽绒服男就又挤下了车. 上车坐定一会, 妹子就发现手机不见了. 再打关机. 妹子说上车前确定手机还在 ,可以肯定就是那个黑衣服男偷得.

  之后补卡, 改密码等等善后事宜暂且不表. 且说说后续一些列发展引起我对互联网安全的思考.

## 开端

  用iphone手机的用户都知道, 一个iphone由一个appleid激活, 如果不进行反激活, 是无法登陆其他appleid的. 所以妹子就打开了丢失模式. 当丢失的手机打开联网时定位并且锁定. 小偷不知道appleid的密码, 就无法解锁手机, 也就无法转手卖出.

  头几天鸟无音信.

  在一两周后, 妹子邮箱接连收到邮件, 内容大概是:

  > 您的iphone正在尝试解锁刷机, 如果是您操作, 请忽略; 如果不是您操作, 请登录[Apple ID 服务中心](#)进行取消操作. 该操作将在12小时后被允许.

  署名是 `Apple ID Service`.

  还好妹子是对这种事情无从下手, 问我怎么办, 我比较警惕, 说转发给我, 我接到后打开, 发现这个邮件的格式和内容很正式. 但是很明显有以下几个问题:

  1. 邮件来源地址不是`apple.com`, 而是一个其他的地址.
  2. 邮件中登陆Apple ID 中心的链接也不是官方的.

  打开这个链接, 是个和`查找 iphone`登录界面完全一样的页面. 当然, 这是个伪造的钓鱼网站, 如果妹子自己打开这个并输入了appleid和密码, 那么账号密码就已经陷落了.

  >注意: 如果是手机邮箱, 那么发件人的地址默认是隐藏的. 而且, 打开链接后网页的url也是隐藏的. 所以, 如果是手机打开邮件, 很难分辨真假.


  可见, 被偷iphone手机, 由于其激活机制的特殊性, 产生了一条很色的产业链:

    小偷 -> 网络诈骗技术者

  小偷偷到手机后, 无法解锁, 只能卖给下线. 下线是大型的收购商, 来收购被偷的iphone, 然后进行批量的邮件进行钓鱼, 骗取密码解锁手机.

  于是我告诉妹子, 这种邮件都不要乱点, 不要输入你任何信息.

## 继续

  陆续几天, 还是有同样的伪造刷机警告发来, 妹子都置之不理. 直到开始受到新的类型的邮件, 大概内容:

  > 你的手机在我们公司, 我们无法解锁, 所以按照我们的收购价800块卖给你. 请看[图片](#), [店铺地址](#).

  妹子经过上一波教训, 已经对互联网有一定的畏惧心理, 所以丝毫没动, 转发给我.

  我收到后打开, 明显的, 日然是来历不明的邮箱地址. 而且, 店铺地址的链接也是来历不明的.

  虽然是来历不明的链接, 我还是想点进去看看, 于是, 我进行了点击. 结果是:

  空白页面...

  为什么是空白页面呢, 怎么不是钓鱼网站了? 于是我打开chrome开发者模式, 重新打开链接, 有很多请求, 我意识到, 这可能是xss攻击.

  有一个XXX.qq.com域名的请求, 中间进行了重定向, 然后又发送一个特殊url的请求, 这个url暂不公开, 可以假设为 xsssite.net

  因为妹子的appleid用的是qq邮箱. 所以如果对qq.com域名下的一个网页注入脚本的话, 当用户打开这个网页, 很可能能拿到这个用户的登录信息.

  由于这次我是从转发的邮件打开的链接, 所以泄露的是我的登录信息, 所以并无大碍.(跨站脚本只是获取了你的登录状态, 能够一段时间内伪造登录状态, 而并不是获取了你的密码)

  xsssite.net这个域名的请求包含的很多内容, 且这个网站就是一个xss攻击的平台. 关于这个xss攻击位置, 如何获取登录状态, 传递了哪些信息, 我还尚未去详细查看, 以后分享给大家.

  我很感叹, 这个产业链远比我想象的发达:

    小偷 -> 网络诈骗技术者 -> 黑客

## 结果

  后来, 由于一些事情, 还是在妹子的登录状态打开一个这种连接, 对方登陆了妹子的邮箱, 从而重置了appleid密码, 当然期间有apple的邮件, 但是妹子以为是假的, 直接忽略掉了. 我没有及时得到消息, 还是让对方得逞了.

# 故事之后的反思

  前面讲了妹子的遭遇, 我又想起近几年几次密码泄露, 信息泄露的事件, 深感互联网安全非常重要, 豺狼虎视眈眈, 但是绝大多数人丝毫没有防范意识. 所以我想了一些关于互联网安全的知识, 提示, 以及应对措施. 给大家普及一下.

#### 互联网危险到何种程度

  请看[乌云网](WooYun.org), 白客们所发现的各种系统漏洞. 触目惊心.

  几年前csdn的数据库泄露事故, 余威犹在. 后续几次京东, 7k7k等网站的大量用户密码泄露都是这次事故的后遗症.

  黑色产业链早已超乎你我的想象. 道高一尺魔高一丈. 你的一切都时时刻刻被攻击者盯着, 不要有侥幸心理.

#### 关于密码

  1. 密码与社会工程学

    >社会工程学: 一种通过对受害者心理弱点、本能反应、好奇心、信任、贪婪等心理陷阱进行诸如欺骗、伤害等危害手段取得自身利益的手法.

    举个例子, 最简单的社会工程学案例, 就是根据你的生日来推测你的银行卡密码. 根据人们慵懒的习惯, 尝试`123456`, `asd123`, 'abcd' 等方便输入的习惯来推测你的密码. 所以说, 


  2. 安全并不在你的掌握之中
  3. 避免所有账号都是同一密码
  4. 二步验证
  5. for 程序员

#### 关于常用邮箱

  1. 你的安全老巢
  2. 独立密码
  3. 不要轻易在浏览器中从邮箱中打开连接

#### 关于手机号

  1. 你的安全命门
  2. 手机丢失后的第一件事

#### 欺诈手段, 防范指南, 上网习惯(不断更新)

  1.
